<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>AI PT Rehab Intake</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <style>
        * {
            box-sizing: border-box;
            font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        }

        body {
            margin: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            background: radial-gradient(circle at top, #3b82f6 0, #020617 55%, #000 100%);
            color: #e5e7eb;
        }

        .shell {
            width: 100%;
            max-width: 960px;
            padding: 24px;
        }

        .card {
            background: rgba(15, 23, 42, 0.95);
            border-radius: 20px;
            padding: 24px 24px 18px;
            border: 1px solid rgba(148, 163, 184, 0.4);
            box-shadow: 0 18px 45px rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(18px);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 12px;
            margin-bottom: 14px;
        }

        .title {
            font-size: 1.6rem;
            font-weight: 700;
            letter-spacing: 0.02em;
        }

        .subtitle {
            font-size: 0.9rem;
            color: #9ca3af;
        }

        .badge {
            font-size: 0.75rem;
            padding: 4px 10px;
            border-radius: 999px;
            border: 1px solid rgba(96, 165, 250, 0.85);
            color: #bfdbfe;
            background: rgba(15, 23, 42, 0.85);
            white-space: nowrap;
        }

        form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 14px;
            margin-top: 6px;
        }

        .field {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .full-width {
            grid-column: 1 / -1;
        }

        label {
            font-size: 0.8rem;
            text-transform: uppercase;
            letter-spacing: 0.08em;
            color: #9ca3af;
        }

        input, select, textarea {
            border-radius: 10px;
            border: 1px solid rgba(55, 65, 81, 0.95);
            padding: 9px 11px;
            font-size: 0.9rem;
            background: rgba(15, 23, 42, 0.9);
            color: #e5e7eb;
            outline: none;
            transition: border 0.16s ease, box-shadow 0.16s ease, background 0.16s ease;
        }

            input:focus, select:focus, textarea:focus {
                border-color: #60a5fa;
                box-shadow: 0 0 0 1px rgba(96, 165, 250, 0.8);
                background: rgba(15, 23, 42, 1);
            }

        textarea {
            resize: vertical;
            min-height: 80px;
        }

        .slider-row {
            display: flex;
            align-items: center;
            gap: 10px;
        }

            .slider-row input[type="range"] {
                flex: 1;
            }

        .slider-value {
            min-width: 26px;
            text-align: center;
            font-size: 0.85rem;
        }

        .footer-row {
            grid-column: 1 / -1;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 4px;
        }

        .btn-primary {
            border-radius: 999px;
            border: none;
            padding: 10px 18px;
            font-size: 0.95rem;
            font-weight: 600;
            letter-spacing: 0.04em;
            text-transform: uppercase;
            cursor: pointer;
            background: linear-gradient(135deg, #4ade80, #22c55e);
            color: #022c22;
            box-shadow: 0 10px 26px rgba(34, 197, 94, 0.55);
            transition: transform 0.09s ease, box-shadow 0.09s ease, filter 0.09s ease;
        }

            .btn-primary:hover {
                transform: translateY(-1px);
                filter: brightness(1.05);
                box-shadow: 0 14px 35px rgba(34, 197, 94, 0.6);
            }

            .btn-primary:active {
                transform: translateY(0);
                box-shadow: 0 8px 18px rgba(34, 197, 94, 0.5);
            }

        .status {
            font-size: 0.83rem;
            color: #9ca3af;
            min-height: 1.2em;
        }

            .status.ok {
                color: #4ade80;
            }

            .status.err {
                color: #fb7185;
            }

        .tiny {
            font-size: 0.7rem;
            color: #6b7280;
            text-align: right;
        }

        @media (max-width: 600px) {
            .card {
                padding: 18px 16px 14px;
            }

            .title {
                font-size: 1.35rem;
            }
        }
    </style>
</head>
<body>
    <div class="shell">
        <div class="card">
            <div class="card-header">
                <div>
                    <div class="title">AI PT Rehab Intake</div>
                    <div class="subtitle">Tell us what’s going on. We’ll email you a rehab plan + exercise visuals.</div>
                </div>
                <div class="badge">AI-PT · Lv. 1</div>
            </div>

            <form id="intakeForm">
                <div class="field">
                    <label for="age">Age</label>
                    <input id="age" name="age" type="number" min="10" max="100" placeholder="22" required />
                </div>

                <div class="field">
                    <label for="activityLevel">Activity level</label>
                    <select id="activityLevel" name="activityLevel" required>
                        <option value="">Choose one…</option>
                        <option value="sedentary">Sedentary</option>
                        <option value="active">Active</option>
                        <option value="powerlifter">Powerlifter</option>
                        <option value="athlete">Athlete / Sport</option>
                    </select>
                </div>

                <div class="field">
                    <label for="area">Main area</label>
                    <select id="area" name="area" required>
                        <option value="">Where is the main issue?</option>
                        <option value="ankle">Ankle / Foot</option>
                        <option value="knee">Knee</option>
                        <option value="hip">Hip</option>
                        <option value="low back">Low back</option>
                        <option value="shoulder">Shoulder</option>
                        <option value="elbow">Elbow</option>
                        <option value="wrist">Wrist / Hand</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="field">
                    <label for="onset">How did it start?</label>
                    <select id="onset" name="onset" required>
                        <option value="">Pick one…</option>
                        <option value="sudden">Sudden (single moment)</option>
                        <option value="gradual">Gradual / over time</option>
                        <option value="post-surgery">Post-surgery</option>
                    </select>
                </div>

                <div class="field">
                    <label for="painType">Pain type</label>
                    <select id="painType" name="painType" required>
                        <option value="">Pick one…</option>
                        <option value="sharp">Sharp</option>
                        <option value="dull">Dull / ache</option>
                        <option value="burning">Burning</option>
                        <option value="stabbing">Stabbing</option>
                        <option value="other">Other</option>
                    </select>
                </div>

                <div class="field">
                    <label for="timeframe">Timeframe</label>
                    <select id="timeframe" name="timeframe" required>
                        <option value="">How long?</option>
                        <option value="hours">Hours</option>
                        <option value="days">Days</option>
                        <option value="weeks">Weeks</option>
                        <option value="months">Months</option>
                        <option value="years">Years</option>
                    </select>
                </div>

                <div class="field full-width">
                    <label for="flags">Anything worrying? (red flags)</label>
                    <textarea id="flags" name="flags"
                              placeholder="Very large swelling, can’t walk, numbness, fever, weird symptoms…"></textarea>
                </div>

                <div class="field full-width">
                    <label for="currentMovement">What can you do right now?</label>
                    <textarea id="currentMovement" name="currentMovement"
                              placeholder="Barely weight-bearing, can walk with limp, only stairs hurt, etc."
                              required></textarea>
                </div>

                <div class="field full-width">
                    <label for="goals">Movement goals</label>
                    <textarea id="goals" name="goals"
                              placeholder="Get back to powerlifting / pickleball 3x per week, walk without pain, etc."
                              required></textarea>
                </div>

                <div class="field full-width">
                    <label for="email">Email to send your plan</label>
                    <input id="email" name="email" type="email" placeholder="you@example.com" required />
                </div>

                <div class="footer-row">
                    <div id="status" class="status"></div>
                    <div style="display:flex;flex-direction:column;align-items:flex-end;gap:4px;">
                        <button class="btn-primary" type="submit">Generate my rehab plan</button>
                        <div class="tiny">Not medical advice. For educational use only.</div>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <script>
        const WEBHOOK_URL = "http://localhost:5678/webhook/ai-pt-intake"; // <- your production URL

        const form = document.getElementById("intakeForm");
        const statusEl = document.getElementById("status");

        form.addEventListener("submit", async (e) => {
            e.preventDefault();
            statusEl.textContent = "Sending to AI-PT…";
            statusEl.className = "status";

            const fd = new FormData(form);

            const payload = {
                age: Number(fd.get("age")),
                activityLevel: fd.get("activityLevel"),
                area: fd.get("area"),
                onset: fd.get("onset"),
                painType: fd.get("painType"),
                timeframe: fd.get("timeframe"),
                flags: fd.get("flags") || "",
                goals: fd.get("goals"),
                currentMovement: fd.get("currentMovement"),
                email: fd.get("email"),
                userLanguage: "auto"       // matches your webhook output
                // intake_summary will be built inside n8n (Normalize Intake)
            };

            try {
                const res = await fetch(WEBHOOK_URL, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(payload)
                });

                if (!res.ok) {
                    throw new Error("Server responded " + res.status);
                }

                statusEl.textContent = "Plan sent! Check your email in ~10–20 seconds.";
                statusEl.className = "status ok";
                form.reset();
            } catch (err) {
                console.error(err);
                statusEl.textContent = "Error sending to n8n. Check the webhook URL / n8n logs.";
                statusEl.className = "status err";
            }
        });
    </script>
</body>
</html>
